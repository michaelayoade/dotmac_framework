# Production dependencies with security fixes
# Last audit: 2024-02-20

# ======================
# CRITICAL SECURITY FIXES
# ======================
uvicorn[standard]==0.29.0  # CRITICAL: Fixes CVE-2023-45012 (was 0.24.0)
gunicorn==21.2.0  # Production WSGI server with uvicorn workers

# ======================
# CORE FRAMEWORK
# ======================
fastapi==0.115.0
pydantic==2.8.2
pydantic-settings==2.4.0
python-multipart==0.0.9
email-validator==2.2.0

# ======================
# DATABASE
# ======================
sqlalchemy==2.0.31
psycopg2-binary==2.9.9
alembic==1.13.2
asyncpg==0.29.0  # Async PostgreSQL driver

# ======================
# CACHING & MESSAGING
# ======================
redis==5.0.7
hiredis==2.3.2  # C parser for Redis (performance)
aiokafka==0.10.0  # Kafka client if using Kafka adapter

# ======================
# AUTHENTICATION & SECURITY
# ======================
python-jose[cryptography]==3.3.0
passlib[bcrypt]==1.7.4
cryptography==42.0.8

# ======================
# HTTP & NETWORKING
# ======================
httpx==0.27.0
aiohttp==3.9.5
urllib3==2.2.1
certifi==2024.2.2

# ======================
# OBSERVABILITY (SignOz/OpenTelemetry)
# ======================
opentelemetry-api==1.25.0
opentelemetry-sdk==1.25.0
opentelemetry-instrumentation-fastapi==0.46b0
opentelemetry-instrumentation-sqlalchemy==0.46b0
opentelemetry-instrumentation-redis==0.46b0
opentelemetry-instrumentation-httpx==0.46b0
opentelemetry-instrumentation-psycopg2==0.46b0
opentelemetry-instrumentation-logging==0.46b0
opentelemetry-instrumentation-system-metrics==0.46b0
opentelemetry-exporter-otlp==1.25.0
opentelemetry-propagator-b3==1.25.0

# ======================
# UTILITIES
# ======================
python-dotenv==1.0.1
tenacity==8.5.0
pyyaml==6.0.2
click==8.1.7
structlog==24.1.0  # Structured logging
orjson==3.10.0  # Fast JSON serialization

# ======================
# MONITORING & METRICS
# ======================
prometheus-client==0.20.0  # For /metrics endpoint
py-spy==0.3.14  # Runtime profiling
psutil==5.9.8  # System metrics

# ======================
# RATE LIMITING & CIRCUIT BREAKING
# ======================
slowapi==0.1.9
circuitbreaker==1.4.0

# ======================
# ASYNC UTILITIES
# ======================
asyncio-throttle==1.0.2
aiocache==0.12.2
aiofiles==23.2.1

# ======================
# VALIDATION & SERIALIZATION
# ======================
marshmallow==3.21.1
python-dateutil==2.9.0
pytz==2024.1

# ======================
# DEVELOPMENT & TESTING (excluded in production)
# ======================
# pytest==8.0.0
# pytest-asyncio==0.23.5
# pytest-cov==4.1.0
# black==24.2.0
# ruff==0.2.0
# mypy==1.8.0