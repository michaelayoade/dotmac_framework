# CI/CD environment test configuration
# Optimized for GitHub Actions and automated testing

# Core Configuration
ENVIRONMENT=test-ci
DEBUG=false
LOG_LEVEL=INFO

# Test Database Configuration (using service containers in CI)
DATABASE_URL=postgresql+asyncpg://dotmac_test:test_password_123@postgres-test:5432/dotmac_test
TEST_DATABASE_URL=postgresql+asyncpg://dotmac_test:test_password_123@postgres-test:5432/dotmac_test

# Redis Configuration (service containers)
REDIS_URL=redis://redis-test:6379/0
REDIS_TEST_URL=redis://redis-test:6379/1

# Message Queue Configuration
CELERY_BROKER_URL=pyamqp://dotmac_test:test_password_123@rabbitmq-test:5672/dotmac_test
CELERY_RESULT_BACKEND=redis://redis-test:6379/2

# OpenBao Configuration
OPENBAO_URL=http://openbao-test:8200
OPENBAO_TOKEN=test-root-token
USE_OPENBAO=true

# Test Configuration (optimized for CI speed)
PYTEST_MARKERS=unit,integration,smoke
TEST_TIMEOUT=180
MAX_TEST_RETRIES=1
ENABLE_TEST_ENDPOINTS=true
SKIP_EMAIL_VERIFICATION=true
ENABLE_MOCK_PAYMENTS=true
ENABLE_MOCK_NOTIFICATIONS=true

# Performance Testing (reduced for CI efficiency)
PERFORMANCE_TEST_DURATION=15
PERFORMANCE_MAX_USERS=25
PERFORMANCE_SPAWN_RATE=10

# CI-specific optimizations
PYTHONDONTWRITEBYTECODE=1
PYTHONUNBUFFERED=1
PIP_NO_CACHE_DIR=1

# Security Testing
JWT_SECRET_KEY=ci-test-jwt-secret-key-not-for-production
ENCRYPTION_KEY=ci-test-encryption-key-32chars-00

# Aggressive cleanup for CI
AUTO_CLEANUP=true
CLEANUP_ON_SUCCESS=true
CLEANUP_ON_FAILURE=true
CI_AGGRESSIVE_CLEANUP=true

# Resource limits for CI
TEST_MEMORY_LIMIT=2g
TEST_CPU_LIMIT=2.0